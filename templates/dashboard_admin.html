{% extends "base_admin.html" %}
{% block content %}
<style>
    .wrap{max-width:980px;margin:0 auto;padding:14px}
    @media(max-width:1020px){ .wrap{max-width:520px} }

    .adminTop{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow:0 6px 18px rgba(16,24,40,.04);
      padding:14px;
    }
    .adminHead{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .adminHeadLeft{min-width:0}
    .adminTitle{
      font-size:14px;
      font-weight:900;
      letter-spacing:-0.2px;
      line-height:1.1;
      display:flex;align-items:center;gap:8px;flex-wrap:wrap;
    }
    .adminTitle small{
      font-size:11px;
      font-weight:900;
      color:var(--muted);
      letter-spacing:.2px;
    }
    .adminSub{
      margin-top:6px;
      font-size:12px;
      font-weight:300;
      color:var(--muted);
      line-height:1.55;
    }

    .btnRow{display:flex;gap:10px;flex-wrap:wrap}
    .btn{
      height:36px;padding:0 12px;border-radius:999px;
      border:1px solid var(--softBorder);
      background: rgba(255,255,255,0.35);
      color:var(--text);
      font-size:12px;font-weight:800;
      cursor:pointer;
      display:inline-flex;align-items:center;gap:8px;
      user-select:none;
      text-decoration:none;
    }
    body[data-theme="dark"] .btn{background: rgba(255,255,255,0.06)}
    .btn:active{transform:scale(.98)}
    .btn.primary{
      background:#0f172a;color:#fff;border:1px solid rgba(15,23,42,0.30);
    }
    body[data-theme="dark"] .btn.primary{
      background: rgba(255,255,255,0.14);
      border:1px solid rgba(255,255,255,0.16);
      color: var(--text);
    }

    .kpis{
      margin-top:12px;
      display:grid;
      grid-template-columns: repeat(4, 1fr);
      gap:12px;
    }
    @media(max-width:1020px){ .kpis{grid-template-columns:1fr 1fr} }
    @media(max-width:520px){ .kpis{grid-template-columns:1fr} }

    .kpi{
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow:0 6px 18px rgba(16,24,40,.04);
      padding:12px;
      display:flex;
      align-items:flex-start;
      gap:10px;
      min-width:0;
    }
    .kpiIcon{
      width:34px;height:34px;border-radius:14px;
      border:1px solid var(--softBorder);
      background: rgba(15,23,42,0.06);
      display:flex;align-items:center;justify-content:center;
      flex:0 0 auto;
    }
    body[data-theme="dark"] .kpiIcon{background: rgba(255,255,255,0.06)}
    .kpiIcon svg{width:18px;height:18px}
    .kpiMeta{min-width:0}
    .kpiValue{font-size:16px;font-weight:900;letter-spacing:-0.4px}
    .kpiLabel{margin-top:4px;font-size:12px;font-weight:300;color:var(--muted)}
    .kpiTrend{
      margin-top:8px;
      font-size:11px;
      font-weight:900;
      color:var(--muted);
      display:inline-flex;
      gap:6px;
      align-items:center;
      white-space:nowrap;
    }
    .dot{width:7px;height:7px;border-radius:999px;background: rgba(34,197,94,0.70);display:inline-block}
    .dot.warn{background: rgba(245,158,11,0.75)}
    .dot.bad{background: rgba(239,68,68,0.75)}
    .dot.info{background: rgba(99,102,241,0.75)}

    .sectionTitle{
      margin:14px 2px 10px;
      font-size:12px;
      font-weight:900;
      color:var(--text);
      letter-spacing:.15px;
      display:flex;align-items:center;justify-content:space-between;gap:10px;
    }
    .sectionTitle small{font-weight:300;color:var(--muted)}

    .panel{
      margin-top:12px;
      background:var(--card);
      border:1px solid var(--border);
      border-radius:18px;
      box-shadow:0 6px 18px rgba(16,24,40,.04);
      overflow:hidden;
    }
    .panelHead{
      padding:12px 14px;
      border-bottom:1px solid var(--border);
      display:flex;align-items:center;justify-content:space-between;gap:10px;
      background: rgba(255,255,255,0.20);
      flex-wrap:wrap;
    }
    body[data-theme="dark"] .panelHead{background: rgba(255,255,255,0.04)}
    .panelTitle{display:flex;align-items:center;gap:10px;font-size:12px;font-weight:900}
    .panelTitle svg{width:18px;height:18px}
    .panelBody{padding:12px 14px}

    .toolList{display:flex;flex-direction:column;gap:10px}
    .toolItem{
      border:1px solid var(--border);
      background: rgba(255,255,255,0.20);
      border-radius:16px;
      padding:10px;
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    body[data-theme="dark"] .toolItem{background: rgba(255,255,255,0.04)}
    .toolLeft{display:flex;gap:10px;min-width:0;flex:1}
    .toolIcon{
      width:44px;height:44px;border-radius:16px;
      border:1px solid var(--softBorder);
      background: rgba(15,23,42,0.06);
      display:flex;align-items:center;justify-content:center;
      flex:0 0 auto;
    }
    body[data-theme="dark"] .toolIcon{background: rgba(255,255,255,0.06)}
    .toolIcon svg{width:20px;height:20px}
    .toolMeta{min-width:0}
    .toolTitle{font-size:12px;font-weight:900;line-height:1.35}
    .toolDesc{
      margin-top:4px;
      font-size:11px;
      font-weight:300;
      color:var(--muted);
      line-height:1.5;
      max-width:680px;
    }
    .toolRight{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end}

    .miniBtn{
      height:34px;padding:0 12px;border-radius:999px;
      border:1px solid var(--softBorder);
      background: rgba(255,255,255,0.35);
      color:var(--text);
      font-size:12px;font-weight:900;
      cursor:pointer;
      display:inline-flex;align-items:center;gap:8px;
      user-select:none;
      text-decoration:none;
    }
    body[data-theme="dark"] .miniBtn{background: rgba(255,255,255,0.06)}
    .miniBtn:active{transform:scale(.98)}
  </style>

  <main class="wrap">
    <section class="adminTop">
      <div class="adminHead">
        <div class="adminHeadLeft">
          <div class="adminTitle">
            Admin Panel <small>MANAGEMENT ONLY</small>
          </div>
          <div class="adminSub">
            Post Review • Report Manage • Writer Manage • Site Status. (Admin কখনো পোস্ট করবে না)
          </div>
        </div>

        <div class="btnRow">
          <a class="btn" href="{{ url_for('admin_users') }}">
            <span data-lucide="users"></span> Manage Writers
          </a>
          <a class="btn primary" href="{{ url_for('admin_site_status') }}">
            <span data-lucide="activity"></span> Status of web
          </a>
        </div>
      </div>
    </section>

    <div class="sectionTitle">
      <span>Site Status</span>
      <small>Live</small>
    </div>

    <section class="kpis">
      <div class="kpi">
        <div class="kpiIcon"><span data-lucide="activity"></span></div>
        <div class="kpiMeta">
          <div class="kpiValue">100%</div>
          <div class="kpiLabel">Uptime</div>
          <div class="kpiTrend"><span class="dot"></span><span>stable</span></div>
        </div>
      </div>

      <div class="kpi">
        <div class="kpiIcon"><span data-lucide="scan"></span></div>
        <div class="kpiMeta">
          <div class="kpiValue">{{ pending_posts|length }}</div>
          <div class="kpiLabel">Review posts</div>
          <div class="kpiTrend"><span class="dot info"></span><span>pending</span></div>
        </div>
      </div>

      <div class="kpi">
        <div class="kpiIcon"><span data-lucide="shield-alert"></span></div>
        <div class="kpiMeta">
          <div class="kpiValue">{{ post_report_count }}</div>
          <div class="kpiLabel">Post reports</div>
          <div class="kpiTrend"><span class="dot bad"></span><span>urgent</span></div>
        </div>
      </div>

      <div class="kpi">
        <div class="kpiIcon"><span data-lucide="user-plus"></span></div>
        <div class="kpiMeta">
          <div class="kpiValue">{{ writer_applicants|length }}</div>
          <div class="kpiLabel">Writer requests</div>
          <div class="kpiTrend"><span class="dot warn"></span><span>new</span></div>
        </div>
      </div>
    </section>

    <div class="sectionTitle">
      <span>Admin Tools</span>
      <small>Manage only</small>
    </div>

    <section class="panel">
      <div class="panelHead">
        <div class="panelTitle"><span data-lucide="settings"></span> Controls</div>
        <a class="btn" href="{{ url_for('admin_audit_log') }}">
          <span data-lucide="file-terminal"></span> Logs
        </a>
      </div>

      <div class="panelBody">
        <div class="toolList">
          <div class="toolItem">
            <div class="toolLeft">
              <div class="toolIcon"><span data-lucide="scan"></span></div>
              <div class="toolMeta">
                <div class="toolTitle">Post Review Queue</div>
                <div class="toolDesc">Writers যে পোস্ট সাবমিট করবে—এখানে approve / reject / request changes হবে।</div>
              </div>
            </div>
            <div class="toolRight">
              <a class="miniBtn" href="{{ url_for('dashboard_admin') }}">
                <span data-lucide="arrow-right"></span> Open
              </a>
            </div>
          </div>

          <div class="toolItem">
            <div class="toolLeft">
              <div class="toolIcon"><span data-lucide="shield-alert"></span></div>
              <div class="toolMeta">
                <div class="toolTitle">Post Reports</div>
                <div class="toolDesc">পোস্ট রিপোর্ট হলে এখানে manage হবে (remove, warn, strike, restore)।</div>
              </div>
            </div>
            <div class="toolRight">
              <a class="miniBtn" href="{{ url_for('admin_post_reports') }}">
                <span data-lucide="arrow-right"></span> Open
              </a>
            </div>
          </div>

          <div class="toolItem">
            <div class="toolLeft">
              <div class="toolIcon"><span data-lucide="user-plus"></span></div>
              <div class="toolMeta">
                <div class="toolTitle">Writer Requests</div>
                <div class="toolDesc">নতুন writer হতে চাইলে এখানে approve / decline / verify হবে।</div>
              </div>
            </div>
            <div class="toolRight">
              <a class="miniBtn" href="{{ url_for('admin_users', filter='pending') }}">
                <span data-lucide="arrow-right"></span> Open
              </a>
            </div>
          </div>

          <div class="toolItem">
            <div class="toolLeft">
              <div class="toolIcon"><span data-lucide="settings-2"></span></div>
              <div class="toolMeta">
                <div class="toolTitle">Maintenance Mode</div>
                <div class="toolDesc">Site read-only / write-block toggle (ডেমো)।</div>
              </div>
            </div>
            <div class="toolRight">
              <button class="miniBtn" type="button" disabled>
                <span data-lucide="toggle-right"></span> Toggle
              </button>
            </div>
          </div>

        </div>
      </div>
    </section>
  </main>
{% endblock %}
